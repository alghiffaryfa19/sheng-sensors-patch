# Maintainer: Jami Kettunen <jami.kettunen@protonmail.com>

pkgname="fastrpc"
pkgdesc="fastrpc Xiaomi Mi Pad 6s Pro"
pkgver=1.0.2
pkgrel=1
arch="aarch64"
url="https://github.com/qualcomm/fastrpc"
license="BSD-3-Clause"
makedepends="
	git
	make
	gcc
	linux-api-headers
"

depends="libyaml"
source="
	"https://github.com/qualcomm/$pkgname/archive/refs/tags/v$pkgver.zip"
	"adsprpcd-sensorspd.service"
"

sha512sums="
	"SKIP"
	"SKIP"
"

build() {
	cd "$pkgname-$pkgver"

	autoreconf -is
	./configure --prefix=/usr
	make
}

package() {
	cd "$pkgname-$pkgver"

	make DESTDIR="$pkgdir" install

	mkdir -p $pkgdir/usr/lib/systemd/system
	install -m 0644 $srcdir/adsprpcd-sensorspd.service $pkgdir/usr/lib/systemd/system
}
