pkgname="fastrpc"
pkgdesc="fastrpc Xiaomi Mi Pad 6s Pro"
pkgver=1.0.2
pkgrel=1
arch="aarch64"
url="https://github.com/qualcomm/fastrpc"
license="BSD-3-Clause"
makedepends="
	autoconf
	automake
	libtool
	git
	make
	gcc
	linux-headers
"

depends="yaml-dev"
source="
	"https://github.com/qualcomm/$pkgname/archive/refs/tags/v$pkgver.zip"
	"adsprpcd-sensorspd.service"
"

builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	autoreconf -is
	./configure --prefix=/usr
	make

	
}

package() {
	cd "$builddir"

	make DESTDIR="$pkgdir" install

	mkdir -p $pkgdir/usr/lib/systemd/system
	rm -rf "$builddir"/test
	install -m 0644 $srcdir/adsprpcd-sensorspd.service $pkgdir/usr/lib/systemd/system
}
